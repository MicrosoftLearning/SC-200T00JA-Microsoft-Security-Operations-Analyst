# モジュール 7 - ラボ 1 - 演習 8 - ワークブックの作成

## ラボ シナリオ

あなたは Azure Sentinel を実装済みの会社で働いているセキュリティ オペレーションアナリストです。高度な視覚化を使用してワークブックを設計する必要があります。

### タスク 1: ワークブックを調べる

このタスクでは、ブックの構成について説明します。

1. 管理者として WIN1 仮想マシンにログインします。パスワードは **Pa55w.rd** です。  

2. Edge ブラウザーで Azure ポータルに移動します https://portal.azure.com

3. **サインイン**ダイアログボックスで、ラボ ホスティング プロバイダーから提供された**テナントの電子メール** アカウントをコピーして貼り付け、「**次へ**」を選択します。

4. **パスワードの入力**ダイアログ ボックスで、ラボ ホスティング プロバイダーから提供された**テナントパスワード** をコピーして貼り付け、「**サインイン**」を選択します。

5. Azure ポータルの検索バーに 「*Sentinel*」 と入力し、「**Azure Sentinel**」を選択します。

6. Azure Sentinel ワークスペースを選択します。

7. 「**ワークブック**」を選択します。

8. 「**ID とアクセス**」を選択し、「**テンプレートの表示**」を選択します。

9. ワークブックを確認します。

10. 「**ワークブック**」を選択 

11. テンプレート タブで 「**Azure AD Sign-on logs** 」を検索して選択し、「**保存**」を選択します。 

12. 適切な領域を選択します。  適切な場所は通常、既定です。

13. **保存されたワークブックの表示**を選択します。

14. コマンドバーの「**編集**」を選択します。

15. サインインの場所」エリアで、グリッドの下部にある「**編集**」を選択します。

#### 列をフォーマットするには、列設定パネルにカスタマイズオプションがあるので、次のようにします。

16. クエリコマンドバーの「**列設定**」を選択します。

17. 列の「**故障回数**」を選択する。**|Interrupt Count** 

18. 列のレンダラーやカラーパレットなどの設定を確認します。

19. 列 「**Trend**」 を選択します。

20. 列のレンダラーやカラーパレットなどの設定を確認します。

21. [**キャンセル**」を選択します。

#### あるタイル/グリッドのコントロールが、別のタイル/グリッドの結果をフィルタリングするには、次のようにします。

22. クエリの「**詳細設定**」タブを選択します。

23. アイテムが選択されたら、パラメーターをエクスポートすることを確認します。  LocationDetail フィールドが選択されていることに注意してください。

24. クエリの下部にある「**編集完了**」を選択します。

25. 画面の右側にあるデバイスサインインの詳細テーブルの「**編集**」を選択します。  

26. クエリの中で「領域詳細」を探します。  このクエリは、他のクエリからエクスポートされたパラメータを使用して結果をフィルタリングしています。

27. クエリの「**編集完了**」を選択します。

28. ワークブックの**編集完了**を選択します。

### タスク 2: ワークブックを作成します。

このタスクでは、高度な視覚化を備えた新しいワークブックを作成します。

1. Azure Sentinel ポータルで「**ワークブック**」を選択します。

2. 「**ワークブックの追加**」を選択します

3. 「**編集**]を選択します

#### ヘッダーテキストを編集します:

4. *新しいワークブック*を*マイワークブック*に変更します。

5. 「**編集完了**」を選択します。

6. 表示される唯一のグラフとして「**編集**」を選択します。

7. 複数のテーブルにわたるカウントの和集合を提供する KQL ステートメントを確認してください。

8. 「**編集完了**」を選択します。

9. **...** を選択し、「**追加**」を選択し、「**クエリを追加**」を選択します。

10. 「*SecurityEvent*」を入力し、「**クエリ実行**」を選択します。

11. タイムレンジを「**過去3日間**」に変更します。

12. 視覚化をさまざまなオプションに変更して、結果を確認します。

13. 可視化を「**タイムチャート**」に変更します。

14. クエリタブの「**スタイル**」を選択します。

15. 「**Make this item a custom width**」 ボックスを選択します。

16. パーセント幅 を 「**75**」 に、最大幅 を 「**75**」 に設定します。

17. クエリタブの「**高度な設定**」を選択します。

18. 「**Enable time range brushing**」ボックスを選択します。 

19. **選択した時間範囲をパラメーターとしてエクスポート**するために 「*demoparam*」 を入力します。

20. 「**編集完了**」を選択します。

21. 表示されているグリッド上で、1回クリックし、押したままドラッグします。  選択した範囲が表示されます。

22. 「**追加**」、「**クエリの追加**」の順に選択します。

クエリに対して次の KQL コマンドを入力します。:

```
SecurityEvent
```

23. Time Range で 「**demoparam**」 を選択します。

24. 視覚化を「**グリッド**」に変更します。

25. 「**スタイル**」タブを選択します。

26. 「**Make this item a custom width**」 を選択します。

27. パーセント幅を 「**25**」、最大幅を 「**25**」 に変更します。

クエリの編集完了

28. **ワークブックの編集完了**を選択します。

29. 「**保存**」を選択し、プロンプトが表示されたら再度「**保存**」を選択します。

30. Azure Sentinel ポータルで「**ワークブック**」を選択します。

31. 「**自分の API**」 ブを選択します。

32. 作成したワークブックを選択します。

33. 保存されたワークブックの表示を選択します。

**注:** グリッド上でドラッグしてタイムスライスを試すことを忘れないでください。

## これでラボは完了です。
